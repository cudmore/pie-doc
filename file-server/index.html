
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raspberry Pi Controlled Experiment (PiE)">
      
      
        <meta name="author" content="Robert H Cudmore">
      
      
      
        <link rel="prev" href="../troubleshooting/">
      
      
        <link rel="next" href="../mount-usb-drive/">
      
      <link rel="icon" href="../img/icons/video-camera-blue.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.3">
    
    
      
        <title>File Server - PiE Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.c4a75a56.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2023-install-netatalk-afp" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PiE Docs" class="md-header__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PiE Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              File Server
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PiE Docs" class="md-nav__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    PiE Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-buster/" class="md-nav__link">
        Preparing a Raspberry Pi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Install the PiE server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../web-interface/" class="md-nav__link">
        Web Interface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../commander/" class="md-nav__link">
        Commander
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../video-annotate/" class="md-nav__link">
        Video Annotate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parts/" class="md-nav__link">
        Parts
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Wiring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Wiring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-behavior-box/" class="md-nav__link">
        Behavior Box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-scope/" class="md-nav__link">
        Scope
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-treadmill/" class="md-nav__link">
        Treadmill
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../images/" class="md-nav__link">
        Images
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
      
      
      
        <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          File Server
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        File Server
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2023-install-netatalk-afp" class="md-nav__link">
    2023 Install netatalk (AFP)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2023-install-samba-smb" class="md-nav__link">
    2023 Install SAMBA (SMB)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#old-samba-smb" class="md-nav__link">
    Old, Samba (SMB)
  </a>
  
    <nav class="md-nav" aria-label="Old, Samba (SMB)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-samba" class="md-nav__link">
    1) Install Samba
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-edit-etcsambasmbconf" class="md-nav__link">
    2) Edit /etc/samba/smb.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-the-following-to-the-end-of-the-smbconf-file" class="md-nav__link">
    3) Add the following to the end of the smb.conf file.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-create-a-samba-password" class="md-nav__link">
    4) Create a Samba password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-restart-samba" class="md-nav__link">
    5) Restart Samba
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-test-the-server-from-another-machine-on-the-network" class="md-nav__link">
    6) Test the server from another machine on the network.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#old-apple-file-protocol-afp" class="md-nav__link">
    Old, Apple-File-Protocol (AFP)
  </a>
  
    <nav class="md-nav" aria-label="Old, Apple-File-Protocol (AFP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-netatalk" class="md-nav__link">
    1) Install netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-changing-the-default-name-of-a-pi-in-netatalk" class="md-nav__link">
    2) Changing the default name of a Pi in netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-restart-netatalk" class="md-nav__link">
    3) Restart netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-test-the-server-from-another-machine-on-the-network" class="md-nav__link">
    4) Test the server from another machine on the network.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mount-usb-drive/" class="md-nav__link">
        Mount USB Drive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rest-interface/" class="md-nav__link">
        Rest Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trial-file/" class="md-nav__link">
        Trial File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gpio-timing/" class="md-nav__link">
        GPIO Timing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../implementation-details/" class="md-nav__link">
        Implementation details
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#2023-install-netatalk-afp" class="md-nav__link">
    2023 Install netatalk (AFP)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2023-install-samba-smb" class="md-nav__link">
    2023 Install SAMBA (SMB)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#old-samba-smb" class="md-nav__link">
    Old, Samba (SMB)
  </a>
  
    <nav class="md-nav" aria-label="Old, Samba (SMB)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-samba" class="md-nav__link">
    1) Install Samba
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-edit-etcsambasmbconf" class="md-nav__link">
    2) Edit /etc/samba/smb.conf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-the-following-to-the-end-of-the-smbconf-file" class="md-nav__link">
    3) Add the following to the end of the smb.conf file.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-create-a-samba-password" class="md-nav__link">
    4) Create a Samba password
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-restart-samba" class="md-nav__link">
    5) Restart Samba
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-test-the-server-from-another-machine-on-the-network" class="md-nav__link">
    6) Test the server from another machine on the network.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#old-apple-file-protocol-afp" class="md-nav__link">
    Old, Apple-File-Protocol (AFP)
  </a>
  
    <nav class="md-nav" aria-label="Old, Apple-File-Protocol (AFP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-netatalk" class="md-nav__link">
    1) Install netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-changing-the-default-name-of-a-pi-in-netatalk" class="md-nav__link">
    2) Changing the default name of a Pi in netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-restart-netatalk" class="md-nav__link">
    3) Restart netatalk
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-test-the-server-from-another-machine-on-the-network" class="md-nav__link">
    4) Test the server from another machine on the network.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>File Server</h1>

<p>This is a recipe for configuring a Raspberry Pi as a file-server. Once configured as a file-server, files on the Raspberry Pi can be easily opened/edited/copied from a remote computer. This is useful for copying recorded video off the Raspberry Pi to another (remote) computer for archiving and analysis.</p>
<p>If you are working on a Windows machine, you need to use <a href="https://www.samba.org/">Samba</a>. If you are working on macOS you want to use <a href="http://netatalk.sourceforge.net/">AFP</a> but can also use <a href="https://www.samba.org/">Samba</a>.</p>
<h3 id="2023-install-netatalk-afp">2023 Install netatalk (AFP)</h3>
<p>Following <a href="https://pimylifeup.com/raspberry-pi-afp/">this tutorial</a>.</p>
<p>Install netatalk</p>
<pre><code>sudo apt install netatalk
</code></pre>
<p>Then configure netatalk.</p>
<p>The <code>nano</code> command will run a little text editor inside the terminal. Use the up/down arrows to position the cursor (not the mouse)</p>
<pre><code>sudo nano /etc/netatalk/afp.conf
</code></pre>
<p>and copy/paste this at the end of the file</p>
<pre><code>[$h]
    path = /home
    home name = $h
</code></pre>
<p>Exit nano with keyboard <code>ctrl x</code></p>
<p>Restart netatalk with</p>
<pre><code>sudo systemctl restart netatalk
</code></pre>
<p>To test this out, on a macOS computer select the main menu <code>Go ... Connect to server ...</code> and type <code>afp:\\</code> followed by the IP address of your PI. In this example we are using <code>192.168.1.17</code> but your IP is most probably different.</p>
<pre><code>afp:\\192.168.1.17
</code></pre>
<p>You should see your Pi mount onto your desktop or finder and you can start browsing files.</p>
<h3 id="2023-install-samba-smb">2023 Install SAMBA (SMB)</h3>
<p>Following <a href="https://pimylifeup.com/raspberry-pi-samba/">this tutorial</a>.</p>
<p>Install samba</p>
<pre><code>sudo apt-get install samba samba-common-bin
</code></pre>
<p>Make a folder to hold video (the PiE server requires this)</p>
<pre><code>mkdir /home/pi/shared
</code></pre>
<p>Edit the smb configuration file with <code>nano</code>. You can move the cursor with up/down arow keys (not the mouse)</p>
<pre><code>sudo nano /etc/samba/smb.conf
</code></pre>
<p>Copy and paste the following to the end of the file</p>
<pre><code>[video]
path = /home/pi/video
writeable=Yes
create mask=0777
directory mask=0777
public=no
</code></pre>
<p>Set a samba password</p>
<pre><code>sudo smbpasswd -a pi
</code></pre>
<p>Restart samba</p>
<pre><code>sudo systemctl restart smbd
</code></pre>
<p>To test this out, on a macOS computer select the main menu <code>Go ... Connect to server ...</code> and type <code>smb:\\</code> followed by the IP address of your PI. In this example we are using <code>192.168.1.17</code> but your IP is most probably different.</p>
<pre><code>smb:\\192.168.1.17
</code></pre>
<p>Your Pi is now a samba file server !!! You could put your IT department out of business...</p>
<h2 id="old-samba-smb">Old, Samba (SMB)</h2>
<p>This is a recipe to make a Raspberry Pi a <a href="https://www.samba.org/">Samba</a> (SMB) file-server that can be accessed from both Windows and macOS.</p>
<h3 id="1-install-samba">1) Install Samba</h3>
<pre><code>sudo apt-get install samba samba-common-bin
</code></pre>
<h3 id="2-edit-etcsambasmbconf">2) Edit <code>/etc/samba/smb.conf</code></h3>
<pre><code>sudo pico /etc/samba/smb.conf
</code></pre>
<p>When using the <a href="https://en.wikipedia.org/wiki/Pico_(text_editor)"><code>pico</code></a> editor, <code>ctrl+x</code> to save and quit, <code>ctrl+w</code> to search, <code>ctrl+v</code> to page down. Remember, the <code>pico</code> editor does not respond to mouse clicks, you need to move the cursor around with arrow keys.</p>
<h3 id="3-add-the-following-to-the-end-of-the-smbconf-file">3) Add the following to the end of the <code>smb.conf</code> file.</h3>
<p>In the Pico editor, move the cursor to the end of the file and copy and paste the following.</p>
<pre><code>[video]
Comment = Pi video shared folder
Path = /home/pi/video
Browseable = yes
Writeable = yes
only guest = no
create mask = 0777
directory mask = 0777
Public = yes
Guest ok = no

[home]
Comment = Pi shared folder
Path = /home/pi
Browseable = yes
Writeable = yes
only guest = no
create mask = 0777
directory mask = 0777
Public = yes
Guest ok = no
</code></pre>
<h3 id="4-create-a-samba-password">4) Create a Samba password</h3>
<pre><code>sudo smbpasswd -a pi
</code></pre>
<h3 id="5-restart-samba">5) Restart Samba</h3>
<pre><code>sudo /etc/init.d/samba restart
</code></pre>
<h3 id="6-test-the-server-from-another-machine-on-the-network">6) Test the server from another machine on the network.</h3>
<p>On a Windows machine, mount the Raspberry Pi Samba file-server with <code>smb:\\[piIP]</code> where [piIP] is the IP address of your pi. Do this by clicking the 'Start' menu and then typing <code>smb:\\[piIP]</code>.</p>
<h2 id="old-apple-file-protocol-afp">Old, Apple-File-Protocol (AFP)</h2>
<p>This is a recipe to make a Raspberry Pi an <a href="http://netatalk.sourceforge.net/">Apple-File-Protocol</a> (AFP) file-server that can be accessed from macOS.</p>
<h3 id="1-install-netatalk">1) Install netatalk</h3>
<pre><code>sudo apt-get install netatalk
</code></pre>
<p>Once netatalk is installed, the Raspberry Pi will show up in the macOS Finder 'Shared' section. The Pi can be mounted in the macOS Finder by going to <code>Go - Connect To Server...</code> and entering <code>afp://[piIP]</code> where [piIP] is the IP address of your Pi.</p>
<h3 id="2-changing-the-default-name-of-a-pi-in-netatalk">2) Changing the default name of a Pi in netatalk</h3>
<p>When a Pi is mounted in macOS using AFP, it will mount as <code>Home Directory</code>. If you have multiple Raspberry Pi computers they all mount with the same 'Home Directory' name which can be confusing. Thus, you want to change the 'mount point' name of each Raspberry Pi. For more information, see <a href="http://blog.cudmore.io/post/2015/06/07/Changing-default-mount-in-Apple-File-Sharing/">this blog post</a> to change the name of the mount point from 'Home Directory'. Or just follow along ...</p>
<p>Stop netatalk</p>
<pre><code>sudo /etc/init.d/netatalk stop
</code></pre>
<p>Edit the netatalk config file</p>
<pre><code>sudo pico /etc/netatalk/AppleVolumes.default
</code></pre>
<p>When using the <a href="https://en.wikipedia.org/wiki/Pico_(text_editor)"><code>pico</code></a> editor, <code>ctrl+x</code> to save and quit, <code>ctrl+w</code> to search, <code>ctrl+v</code> to page down. Remember, the <code>pico</code> editor does not respond to mouse clicks, you need to move the cursor around with arrow keys.</p>
<p>Scroll to the bottom of the file and change this one line where 'the_name_you_want' should be the name you want the given Raspberry Pi to mount as. The '#' is used as a comment and is ignored.</p>
<pre><code># By default all users have access to their home directories.
#~/                     &quot;Home Directory&quot;
~/                      &quot;the_name_you_want&quot;
</code></pre>
<h3 id="3-restart-netatalk">3) Restart netatalk</h3>
<pre><code>sudo /etc/init.d/netatalk start
</code></pre>
<h3 id="4-test-the-server-from-another-machine-on-the-network">4) Test the server from another machine on the network.</h3>
<p>In the macOS Finder, go to <code>Go - Connect To Server...</code> and enter <code>afp://[piIP]</code> where [piIP] is the IP address of your Pi.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.efa0ade1.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>