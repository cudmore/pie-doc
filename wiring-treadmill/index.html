
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raspberry Pi Controlled Experiment (PiE)">
      
      
        <meta name="author" content="Robert H Cudmore">
      
      
      <link rel="icon" href="../img/icons/video-camera-blue.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Treadmill - PiE Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wiring-a-treadmill" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PiE Docs" class="md-header__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PiE Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Treadmill
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PiE Docs" class="md-nav__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    PiE Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../images/" class="md-nav__link">
        Image Gallery
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-buster/" class="md-nav__link">
        Preparing a Raspberry Pi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Install the PiE server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../web-interface/" class="md-nav__link">
        Web Interface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../commander/" class="md-nav__link">
        Commander
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../video-annotate/" class="md-nav__link">
        Video Annotate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parts/" class="md-nav__link">
        Parts List
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Wiring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Wiring" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Wiring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-behavior-box/" class="md-nav__link">
        Behavior Box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-scope/" class="md-nav__link">
        Scope
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Treadmill
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Treadmill
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attaching-a-teensy-to-the-raspberry-pi" class="md-nav__link">
    Attaching a Teensy to the Raspberry Pi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parts" class="md-nav__link">
    Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring" class="md-nav__link">
    Wiring
  </a>
  
    <nav class="md-nav" aria-label="Wiring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#important" class="md-nav__link">
    Important
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pin-table" class="md-nav__link">
    Pin table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-interface" class="md-nav__link">
    Serial interface
  </a>
  
    <nav class="md-nav" aria-label="Serial interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-serial-interface-on-the-command-line" class="md-nav__link">
    Using the serial interface on the command line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extras" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-server/" class="md-nav__link">
        File Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mount-usb-drive/" class="md-nav__link">
        Mount USB Drive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rest-interface/" class="md-nav__link">
        Rest Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trial-file/" class="md-nav__link">
        Trial File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gpio-timing/" class="md-nav__link">
        GPIO Timing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../implementation-details/" class="md-nav__link">
        Implementation details
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attaching-a-teensy-to-the-raspberry-pi" class="md-nav__link">
    Attaching a Teensy to the Raspberry Pi
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parts" class="md-nav__link">
    Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring" class="md-nav__link">
    Wiring
  </a>
  
    <nav class="md-nav" aria-label="Wiring">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#important" class="md-nav__link">
    Important
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pin-table" class="md-nav__link">
    Pin table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-interface" class="md-nav__link">
    Serial interface
  </a>
  
    <nav class="md-nav" aria-label="Serial interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-serial-interface-on-the-command-line" class="md-nav__link">
    Using the serial interface on the command line
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="wiring-a-treadmill">Wiring a treadmill</h1>
<h2 id="overview">Overview</h2>
<p>The treadmill <a href="https://www.sparkfun.com/products/9238">stepper motor</a> is controlled with a <a href="https://www.sparkfun.com/products/12779">motor controller</a> which is controlled by a <a href="https://www.pjrc.com/store/teensy35.html">Teensy</a>. The Teensy is attached to the Pi via USB and code is uploaded using the command line program <a href="https://platformio.org/">platformio</a>. Once the code is running on the Teensy, the PiE server (in pie/pie_app/bTrial.py) uses a serial connection to set treadmill motor parameters. The Teensy logs all events within a trial to memory. At the end of a trial, the PiE server (again in pie/pie_app/bTrial.py) downloads all the events and saves them to a file.</p>
<p>The Teensy code is in <a href="https://github.com/cudmore/pie/blob/master/platformio/treadmill/src/treadmill2.cpp">pie/platformio/treadmill/src/treadmill2.cpp</a>. </p>
<h2 id="attaching-a-teensy-to-the-raspberry-pi">Attaching a Teensy to the Raspberry Pi</h2>
<p>Attach a Teensy microcontroller to the Pi using a USB cable. Code is uploaded using a command line program called <a href="https://platformio.org/">platformio</a>. For how to do this, please refer to the <a href="https://github.com/cudmore/pie/tree/master/platformio">pie/platformio</a> readme. </p>
<h2 id="parts">Parts</h2>
<p>See the main <a href="../parts/">parts</a> page, scroll down to the treadmill section.</p>
<h2 id="wiring">Wiring</h2>
<p>This is a full wiring diagram for microscope triggered video recording and using a Teensy and motor controller with a motorized treadmill. This wiring diagram is made with <a href="http://fritzing.org/home/">Fritzing</a>, download the original <a href="../img/pie.fzz">pie.fzz</a> file if you like.</p>
<p>There are lots of connections here, they can be conceptualized as 4 different subsystems.</p>
<ol>
<li>Wiring the Teensy  to <code>Scope Trigger In</code>, <code>Scope Trigger Out</code>, and <code>Scope Frame out</code>.</li>
<li>Wiring the Teensy to the Raspberry Pi</li>
<li>Wiring the stepper motor to the motor controller.</li>
<li>Wiring the motor controller to the Teensy</li>
</ol>
<p><IMG SRC="../img/pie_fritzing.png"></p>
<h3 id="important">Important</h3>
<ul>
<li>
<p>The Raspberry Pi is <strong>NOT</strong> 5V tolerant. Connecting standard lab equipment using 5V TTL pulses can damage the Pi. These 5V lines can be converted to 3V with a <a href="https://www.adafruit.com/product/757">dedicated level shifter</a>. Or, if you are using a Teensy, these 5V lines can pass through the Teensy which <strong>IS</strong> 5V tolerant but then outputs 3V which can go into the Raspberry Pi. In this way, the Teensy can act as a programmable <a href="https://en.wikipedia.org/wiki/Level_shifter">level shifter</a>.</p>
</li>
<li>
<p>The <a href="https://www.sparkfun.com/products/12779">Easy Driver</a> Motor Driver has a nasty feature. If you connect the 12V line to the board, the Stepper motor <strong>must</strong> be plugged in or else you will fry the driver board. Thus, check the stepper motor is connected before plugging in the 12V line and check the 12V line is not plugged in before disconnecting the stepper motor.</p>
</li>
</ul>
<h3 id="pin-table">Pin table</h3>
<p>Download <a href="../img/pie_pins.pdf">this</a> pdf for a table of all pin connections between the Raspberry, motor controller, and Teensy.</p>
<h2 id="serial-interface">Serial interface</h2>
<p>The treadmill2.cpp code sets up serial communication at 115200 baud.</p>
<p>All serial commands are a single line and must end in a carriage return (ascii 13). If a serial command is not understood by the treadmill code, it will return 'treadmill did not handle serial: ...'.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Actions</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td>h</td>
<td>Help</td>
<td>A list of commands</td>
</tr>
<tr>
<td>v</td>
<td>Get version</td>
<td>Version</td>
</tr>
<tr>
<td>p</td>
<td>Get state</td>
<td>The state of all parameters as name=value pairs</td>
</tr>
<tr>
<td>d</td>
<td>Dump Trial</td>
<td>All events that occurred during the last trial, one line per event. Each event contains a comma separated list of (timestamp, event name, value).</td>
</tr>
<tr>
<td>start</td>
<td>Start Trial</td>
<td>None</td>
</tr>
<tr>
<td>stop</td>
<td>Stop Trial</td>
<td>None</td>
</tr>
<tr>
<td>set,name,value</td>
<td>Set a parameter (name) to a value (value). See table below.</td>
<td>name=value</td>
</tr>
</tbody>
</table>
<p>The command to 'set' a parameter (name) to a value (value) takes the following parameter 'names'. If a 'set' command is not understood, 'SetValue() did not handle ...' is returned.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>meaning</th>
<th>possible values</th>
</tr>
</thead>
<tbody>
<tr>
<td>numEpoch</td>
<td>Number of epochs</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>epochDur</td>
<td>Epoch duration (ms)</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>preDur</td>
<td>Pre duration (ms). Specifies a duration before all epochs.</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>postDur</td>
<td>Post duration (ms). Specifies a duation after all epochs.</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>useMotor</td>
<td>Use the motor during a trial</td>
<td>String in ("motorOn", "")</td>
</tr>
<tr>
<td>motorDel</td>
<td>Delay before turning the motor in an epoch (ms)</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>motorDur</td>
<td>Duration to turn the motor in an epoch (ms)</td>
<td>Unsigned Integer</td>
</tr>
<tr>
<td>motorSpeed</td>
<td>Speed to turn the motor(au)</td>
<td>Unsigned Integer, 100...700 from slow to fast.</td>
</tr>
<tr>
<td>arm</td>
<td>Arm the treadmill to start a trial in response to changes in startTrialPin pin</td>
<td>String in ("True", "False")</td>
</tr>
<tr>
<td>duringPulse</td>
<td>What to do with motor during motorDur</td>
<td>String in ("Rotate", "Locked", "Free")</td>
</tr>
<tr>
<td>betweenPulse</td>
<td>What to do with motor outside of motor dur</td>
<td>String in ("Locked", "Free")</td>
</tr>
</tbody>
</table>
<p>Some examples, </p>
<ul>
<li>To set the number of epochs to 5, use <code>set,numEpoch,5</code>.</li>
<li>To arm the treadmill, use <code>set,arm,True</code></li>
<li>To have the treadmill free to turn between pulses, use <code>set,betweenPulse,Free</code></li>
</ul>
<h3 id="using-the-serial-interface-on-the-command-line">Using the serial interface on the command line</h3>
<p>A simple yet esoteric command line program called <code>screen</code> can be used to establish a serial connection with an Arduino/Teensy on the command line.</p>
<p>Install <code>screen</code></p>
<pre><code>sudo apt-get install screen
</code></pre>
<p>Use <code>screen</code> to connect to serial port. This assumes your Arduino/Teensy is at <code>/dev/ttyACM0</code>.</p>
<pre><code>screen /dev/ttyACM0 115200
</code></pre>
<p>Enter some serial commands manually</p>
<pre><code>h
v
set,numEpoch,5
d
</code></pre>
<p>You might have to hit <code>return</code> to get it going. Quit screen with <code>ctrl+a</code> then type <code>:</code> then type <code>quit</code></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
    
  </body>
</html>