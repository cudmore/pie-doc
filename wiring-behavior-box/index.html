
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raspberry Pi Controlled Experiment (PiE)">
      
      
        <meta name="author" content="Robert H Cudmore">
      
      
      <link rel="icon" href="../img/icons/video-camera-blue.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Behavior Box - PiE Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#wiring-a-behavior-box" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PiE Docs" class="md-header__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PiE Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Behavior Box
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PiE Docs" class="md-nav__button md-logo" aria-label="PiE Docs" data-md-component="logo">
      
  <img src="../img/icons/video-camera-blue.png" alt="logo">

    </a>
    PiE Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cudmore/pie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PiE Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../images/" class="md-nav__link">
        Image Gallery
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install-buster/" class="md-nav__link">
        Preparing a Raspberry Pi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Install the PiE server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../web-interface/" class="md-nav__link">
        Web Interface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../commander/" class="md-nav__link">
        Commander
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../video-annotate/" class="md-nav__link">
        Video Annotate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parts/" class="md-nav__link">
        Parts List
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Wiring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Wiring" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Wiring
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Behavior Box
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Behavior Box
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#full-wiring-schematic" class="md-nav__link">
    Full Wiring Schematic
  </a>
  
    <nav class="md-nav" aria-label="Full Wiring Schematic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pie-hardware-overview-for-a-single-behavior-box" class="md-nav__link">
    PiE hardware overview for a single behavior box
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wiring-table" class="md-nav__link">
    Wiring table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-box-schematic" class="md-nav__link">
    Behavior Box Schematic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raspberry-pi-23-pin-out" class="md-nav__link">
    Raspberry Pi 2/3 pin out
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-the-camera" class="md-nav__link">
    Wiring the camera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-diagram" class="md-nav__link">
    Wiring diagram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lights" class="md-nav__link">
    Lights
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-the-lights" class="md-nav__link">
    Wiring the lights
  </a>
  
    <nav class="md-nav" aria-label="Wiring the lights">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch" class="md-nav__link">
    Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-the-pi-to-the-relay-switch-switch" class="md-nav__link">
    Connect the Pi to the relay switch switch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-a-temperature-and-humidity-sensor" class="md-nav__link">
    Wiring a temperature and humidity sensor
  </a>
  
    <nav class="md-nav" aria-label="Wiring a temperature and humidity sensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#am2302" class="md-nav__link">
    AM2302
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dht22" class="md-nav__link">
    DHT22
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-scope/" class="md-nav__link">
        Scope
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wiring-treadmill/" class="md-nav__link">
        Treadmill
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Extras" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../file-server/" class="md-nav__link">
        File Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mount-usb-drive/" class="md-nav__link">
        Mount USB Drive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rest-interface/" class="md-nav__link">
        Rest Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trial-file/" class="md-nav__link">
        Trial File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gpio-timing/" class="md-nav__link">
        GPIO Timing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../implementation-details/" class="md-nav__link">
        Implementation details
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#full-wiring-schematic" class="md-nav__link">
    Full Wiring Schematic
  </a>
  
    <nav class="md-nav" aria-label="Full Wiring Schematic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pie-hardware-overview-for-a-single-behavior-box" class="md-nav__link">
    PiE hardware overview for a single behavior box
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wiring-table" class="md-nav__link">
    Wiring table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavior-box-schematic" class="md-nav__link">
    Behavior Box Schematic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raspberry-pi-23-pin-out" class="md-nav__link">
    Raspberry Pi 2/3 pin out
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-the-camera" class="md-nav__link">
    Wiring the camera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-diagram" class="md-nav__link">
    Wiring diagram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lights" class="md-nav__link">
    Lights
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-the-lights" class="md-nav__link">
    Wiring the lights
  </a>
  
    <nav class="md-nav" aria-label="Wiring the lights">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch" class="md-nav__link">
    Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-the-pi-to-the-relay-switch-switch" class="md-nav__link">
    Connect the Pi to the relay switch switch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wiring-a-temperature-and-humidity-sensor" class="md-nav__link">
    Wiring a temperature and humidity sensor
  </a>
  
    <nav class="md-nav" aria-label="Wiring a temperature and humidity sensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#am2302" class="md-nav__link">
    AM2302
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dht22" class="md-nav__link">
    DHT22
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="wiring-a-behavior-box">Wiring a behavior box</h1>
<p>Wiring a behavior box is fairly simple. The Pi needs to be wired to one end of a relay/switch, the other end of the relay/switch is wired to 12V DC, IR and white LEDs, and the fan. Finally the temperature/humidity sensor is wired to the Pi.</p>
<h2 id="full-wiring-schematic">Full Wiring Schematic</h2>
<h3 id="pie-hardware-overview-for-a-single-behavior-box">PiE hardware overview for a single behavior box</h3>
<p>Starting with the network connection, the Raspberry Pi receives commands and sends data through the ethernet cable. It sends and receives data from the temperature/humidity sensor (DHT) and the video camera (teal outlined boxes). It sends data to the quad channel relay, which turns power on or off to the white lights, infrared lights, and fan. Wire colors used for temperature/humidity sensor and quad channel relay are consistent with the Wiring Table. Plug in locations for each wire on the quad channel relay can be used as a reference. </p>
<p><IMG SRC="../img/schematics/230627_fullschematic_wcloudai.png" width=700 align="center"></p>
<h3 id="wiring-table">Wiring table</h3>
<p>The Raspberry Pi diagram (top, right) shows a map to every pin on the Raspberry Pi, to differentiate signal pins, power pins, and ground pins. Temperature/Humidity Sensor Wiring table (bottom left), colors match the color of the wires as depicted in the hardware overview, and on the physical DHT sensor on the purchase list. Quad channel relay shield wiring table (bottom right), wire colors match the colors used in the hardware overview. </p>
<p><IMG SRC="../img/schematics/pi-wiring-diagram.jpg" width=700 align="center"></p>
<h3 id="behavior-box-schematic">Behavior Box Schematic</h3>
<p>Schematic showing an overview of a single behavior box with sensors and actuators in place within the box. </p>
<p><IMG SRC="../img/schematics/behaviorbox_schematic.png" width=700 align="center"></p>
<h2 id="raspberry-pi-23-pin-out">Raspberry Pi 2/3 pin out</h2>
<p><IMG SRC="../img/raspberry_pins.png" width=650></p>
<p>There are multiple power and ground pins, use these to connect to the relay switch and the temperature sensor. Conceptually, all the ground pins are the same, you can use a <a href="https://www.adafruit.com/product/64">bread-board</a> if you run out of ground pins or the wiring becomes too tangled.</p>
<h2 id="wiring-the-camera">Wiring the camera</h2>
<p>The Raspberry Pi <a href="https://www.adafruit.com/product/3100">NoIR camera</a> (and the <a href="https://www.adafruit.com/product/3099">normal Pi camera</a>) is connected to the Pi with a flat [ribbon cable][flat-camera-cable]. The length should not exceed 2 meters. The cable should have one side with a blue tab (one on each end). When connecting the cable to the camera and the Pi, the direction of the blue tab matters. If it is backwards, the camera will not function.</p>
<ul>
<li>The blue side of the cable must go towards the back of the camera.</li>
<li>The blue side of the cable must go towards the ethernet and USB ports.</li>
</ul>
<p>Finally, the camera must be activated from the command line using <code>sudo raspi-config</code> and choosing '5 Interface Options' then 'P1 Camera' and answering 'Yes'.</p>
<h2 id="wiring-diagram">Wiring diagram</h2>
<p><IMG SRC="../img/pie-homecage.png" width=600></p>
<h2 id="lights">Lights</h2>
<p><strong>Use an external 12V AC/DC power supply.</strong> - Don't power the lights directly from the 5V pins on the Pi, the Pi does not have enough current. A &gt;1 Amp 12V adapter should be fine. Don't worry, if it is under-powered, the LED lights will be a little dim.</p>
<p><strong>Use a relay switch.</strong> - Never connect the 12V adapter directly to the Pi, instead use a relay switch. Only work with DC current coming out of the AC/DC adapter, <strong>DO NOT</strong> work with AC power coming from the wall as it can kill you.</p>
<p>The relay switch effectively separates the 5V, Ground, and GPIO on the Pi (left half of the relay) from the 12V power of the AC/DC adapter and the lights (right half of the relay). Here we will wire the system with the white LED on channel 1 and the IR LED on channel 2 of the relay switch. </p>
<p><strong>All LEDs need resistors.</strong> - All LEDs need a resistor, these are called 'current limiting resistor'. If you directly connect an LED to power and ground without a resistor, you will burn the LED.</p>
<p>The value of the resistor (in Ohms) needs to be calculated using <a href="https://en.wikipedia.org/wiki/Ohm%27s_law">Ohms law</a>, V=I*R. Where:</p>
<ul>
<li>V (Volts) is determined by the power source</li>
<li>I (Amps) depends on the properties of each LED and if they are wired in series or in parallel</li>
<li>R (Ohms) is what needs to be calculated.</li>
</ul>
<p>Follow <a href="http://www.resistorguide.com/resistor-for-led/">this</a> tutorial to get started calculating the required resistor value. </p>
<p><strong>Use IR LEDs &lt;900 nm.</strong> - These are within the sensitivity range of the Pi NoIR camera. A lot of IR LEDs are 940nm, these are not well suited for use with the Pi NoIR camera but are designed for IR sensors as is used in a TV remote.</p>
<h2 id="wiring-the-lights">Wiring the lights</h2>
<p><IMG SRC="../img/two-channel-relay.png" width=550></p>
<h3 id="connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch">Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.</h3>
<ul>
<li>
<p>Using a 12V AC/DC adapter (&gt;1 Amp), cut the wire and stick the positive 'hot' wire into the center 'common' pin' of channel 1 on the relay switch. The 'hot' end wire usually has a white line down the length of the wire. You can also determine the 'hot' end using a multi-meter, it is the one that gives a positive (+) voltage when attached to the positive (normally red) end of the multi-meter.</p>
</li>
<li>
<p>Cut a bit of wire and connect the center 'common pin' of channel 1 to the center 'common pin' of channel 2. This is the 'hot' end.</p>
</li>
<li>
<p>Stick the positive end of the white LED into the 'normally closed' port of channel 1. Attach the negative end of the white LED to the 'ground' wire of the 12V AC/DC adapter. Remember, all LEDs need resistors!</p>
</li>
<li>
<p>Do the same for the IR LED. Stick the positive end into the 'normally closed' port of channel 2 on the relay switch. Attach the negative end of the IR LED to the 'ground' wire of the 12V AC/DC adapter. Remember, all LEDs need resistors!</p>
</li>
<li>
<p>Tie the three grounds together, this includes the ground from the 12V AC/DC adapter, the white LEDs and the IR LEDs.</p>
</li>
</ul>
<h3 id="connect-the-pi-to-the-relay-switch-switch">Connect the Pi to the relay switch switch</h3>
<p>Connect 4 wires from the Pi to the relay switch. All these wires go on the opposite end from the 12V wires. Look at your relay switch for the correct connects, they are usually clearly labelled but can be in a different order from the image shown.</p>
<ul>
<li>Connect a GPIO pin from the Pi to the 'In1=Digital Input' pin on the relay switch.</li>
<li>Connect a second GPIO pin from the Pi to the 'In2=Digital Input' pin on the relay switch.</li>
<li>Connect a 5V pin from the Pi to the 'Vcc' pin on the relay switch.</li>
<li>Connect a ground pin from the Pi to the 'GND' pin on the relay switch.</li>
</ul>
<h2 id="wiring-a-temperature-and-humidity-sensor">Wiring a temperature and humidity sensor</h2>
<p>The PiE server can log temperature and humidity using the DHT line of temperature sensors. To use these sensors, the <a href="https://github.com/adafruit/DHT-sensor-library">Adafruit Python sensor library</a> needs to to be installed.</p>
<pre><code>cd ~/pie
./install-dht
</code></pre>
<p>There are additional troubleshooting tips in the <a href="https://github.com/cudmore/pie/tree/master/testing">pie/testing/</a> folder.</p>
<p><IMG SRC="../img/am2302.png" width=250 align="right"></p>
<h3 id="am2302"><a href="https://www.adafruit.com/product/393">AM2302</a></h3>
<p>Red is power, black is ground, and yellow is data.</p>
<ul>
<li>Connect a 5V pin from the Pi to the red wire on the sensor.</li>
<li>Connect a ground pin from the Pi to the back wire on the sensor.</li>
<li>Connect a GPIO pin from the Pi to the yellow (data) pin on the sensor.</li>
</ul>
<p><IMG SRC="../img/dht22-pin-out.png" width=250 align="right"></p>
<h3 id="dht22"><a href="https://www.adafruit.com/product/385">DHT22</a></h3>
<ul>
<li>Connect a 5V pin from the Pi to the 'VCC' pin on the sensor.</li>
<li>Connect a ground pin from the Pi to the 'GND' pin on the sensor.</li>
<li>Connect a GPIO pin from the Pi to the 'DATA' pin on the sensor.</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
    
    
  </body>
</html>